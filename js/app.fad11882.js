(function(t){function i(i){for(var e,r,o=i[0],l=i[1],h=i[2],c=0,d=[];c<o.length;c++)r=o[c],n[r]&&d.push(n[r][0]),n[r]=0;for(e in l)Object.prototype.hasOwnProperty.call(l,e)&&(t[e]=l[e]);u&&u(i);while(d.length)d.shift()();return a.push.apply(a,h||[]),s()}function s(){for(var t,i=0;i<a.length;i++){for(var s=a[i],e=!0,o=1;o<s.length;o++){var l=s[o];0!==n[l]&&(e=!1)}e&&(a.splice(i--,1),t=r(r.s=s[0]))}return t}var e={},n={app:0},a=[];function r(i){if(e[i])return e[i].exports;var s=e[i]={i:i,l:!1,exports:{}};return t[i].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=t,r.c=e,r.d=function(t,i,s){r.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:s})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,i){if(1&i&&(t=r(t)),8&i)return t;if(4&i&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var e in t)r.d(s,e,function(i){return t[i]}.bind(null,e));return s},r.n=function(t){var i=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(i,"a",i),i},r.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},r.p="/kalman/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=i,o=o.slice();for(var h=0;h<o.length;h++)i(o[h]);var u=l;a.push([0,"chunk-vendors"]),s()})({0:function(t,i,s){t.exports=s("56d7")},"034f":function(t,i,s){"use strict";var e=s("64a9"),n=s.n(e);n.a},"56d7":function(t,i,s){"use strict";s.r(i);s("cadf"),s("551c"),s("097d");var e=s("2b0e"),n=function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{attrs:{id:"app"}},[s("Kalman")],1)},a=[],r=function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",[s("h2",{staticClass:"title"},[t._v("Kalman Filter 2D demo")]),s("h3",{staticClass:"subtitle"},[t._v("Antonio Vivace, June 2019")]),s("mu-row",{staticClass:"stats"},[s("mu-col",{staticStyle:{padding:"15px"},attrs:{span:"3"}},[s("div",{staticClass:"grid-cell"},[s("mu-button",{attrs:{color:t.startBtnColor},on:{click:t.handleStartButton}},[s("mu-icon",{attrs:{value:t.startBtnIcon}}),t._v(t._s(t.startBtnText))],1),t._v(" \n\t\t\t\t"),s("mu-button",{attrs:{color:"red"},on:{click:t.init}},[s("mu-icon",{attrs:{value:"undo"}}),t._v(" Reset")],1),s("br"),s("br"),t._v("\n\n\t\t\t\tMode:\n\t\t\t\t"),s("mu-select",{on:{change:t.init},model:{value:t.mode,callback:function(i){t.mode=i},expression:"mode"}},t._l(t.options,function(t,i){return s("mu-option",{key:t,attrs:{label:t,value:i}})}),1),s("br"),t._v("\n\t\t\t\tWidth: "+t._s(t.width)+"px\n\t\t\t\t"),s("mu-slider",{staticClass:"slider",attrs:{type:"range",min:0,max:1800,step:1,value:"75"},model:{value:t.width,callback:function(i){t.width=i},expression:"width"}}),t._v("\n\t\t\t\tHeight: "+t._s(t.height)+"px\n\t\t\t\t"),s("mu-slider",{staticClass:"slider",attrs:{type:"range",min:0,max:1e3,step:1,value:"75"},model:{value:t.height,callback:function(i){t.height=i},expression:"height"}}),t._v("\n\n\t\t\t\tNoise covariance: "+t._s(t.sigma)+"\n\t\t\t\t"),s("mu-slider",{staticClass:"demo-slider",attrs:{min:0,max:t.width/3,step:1},model:{value:t.sigma,callback:function(i){t.sigma=i},expression:"sigma"}}),s("h4",[t._v("Stats")]),t._v("\n\t\t\t\t"+t._s(t.status)+", "),s("code",[t._v(t._s(t.states.length))]),t._v(" states drawn.\n\t\t\t\t"),s("code",[t._v(t._s(Math.round(t.ms)))]),t._v(" ms per frame\n\t\t\t")],1)]),s("mu-col",{attrs:{span:"9"}},[s("div",{staticClass:"grid-cell"},[s("canvas",{ref:"ccont",staticClass:"kalmandemo",attrs:{width:t.width,height:t.height},on:{mouseleave:t.mouseLeave,pointermove:t.mouseOver}})])])],1),s("br"),s("br"),s("br"),s("br"),s("br"),s("span",{staticClass:"stats"}),t._m(0)],1)},o=[function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("small",{staticStyle:{"font-size":"1rem"}},[s("p",[s("b",[s("a",{staticStyle:{color:"#2c3e50"},attrs:{href:"https://github.com/avivace/kalman"}},[s("img",{staticStyle:{"vertical-align":"text-bottom"},attrs:{height:"24px",src:"https://akveo.github.io/eva-icons/outline/svg/github-outline.svg"}}),t._v(" Source Code")])])])])}],l=(s("6c7b"),s("6b54"),s("d225")),h=s("b0b4");(function(){function t(t,i){return isNaN(t)?i:t}Math.randomGaussian=function(i,s){if(i=t(i,0),s=t(s,1),void 0!==Math.randomGaussian.nextGaussian){var e=Math.randomGaussian.nextGaussian;return delete Math.randomGaussian.nextGaussian,e*s+i}var n,a,r,o;do{n=2*Math.random()-1,a=2*Math.random()-1,r=n*n+a*a}while(r>=1||0==r);return o=Math.sqrt(-2*Math.log(r)/r),Math.randomGaussian.nextGaussian=a*o,n*o*s+i},Math.getGaussianFunction=function(i,s,e){return i=t(i,0),s=t(s,1),e=t(e,1),function(t){return e*Math.pow(Math.E,-Math.pow(t-i,2)/(s*s*2))}}})();var u={data:function(){return{width:800,height:800,ctx:null,lastCalledTime:null,fps:0,framecount:0,status:"paused",states:[],framerate:160,lastPoint:null,A:null,B:null,H:null,Q:null,R:null,last:null,ms:0,mode:1,options:["Mouse","Square Path","1D"],realPoint:null,drawPhase:0,sigma:100,startBtnText:"Start",startBtnIcon:"play_arrow",startBtnColor:"blue"}},mounted:function(){this.init(),this.frame()},methods:{handleStartButton:function(){"paused"==this.status?(this.status="running",this.startBtnText="Pause",this.startBtnIcon="pause"):(this.status="paused",this.startBtnText="Start",this.startBtnIcon="play_arrow")},getRandomInt:function(t){return Math.floor(Math.random()*Math.floor(t))},mouseLeave:function(){},mouseOver:function(t){var i=this.$refs.ccont,s=i.getBoundingClientRect();this.clientX=t.clientX-s.left,this.clientY=t.clientY-s.top},init:function(){this.drawPhase=0,this.states=[],this.realPoint=null;var t=window.$M,i=window.$V;this.A=t([[1,0,.2,0],[0,1,0,.2],[0,0,1,0],[0,0,0,1]]),this.H=t([[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]]),this.Q=t([[.01,0,0,0],[0,.01,0,0],[0,0,.01,0],[0,0,0,.01]]),this.R=t([[this.sigma,0,0,0],[0,this.sigma,0,0],[0,0,this.sigma,0],[0,0,0,this.sigma]]),this.lastPoint=i([0,0,0,0]),this.last=t([[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]]);var s=this.$refs.ccont;this.ctx=s.getContext("2d",{alpha:!1}),this.ctx.fillStyle="#37474f",this.ctx.fillRect(0,0,this.width,this.height),this.State=function(){function t(i,s,e){Object(l["a"])(this,t),this.realInput=i,this.noisyInput=s,this.kalmanPoint=e,this.dead=!1}return Object(h["a"])(t,[{key:"get",value:function(){return[this.noisyInput.x,this.noisyInput.y,this.noisyInput.ttl]}},{key:"getK",value:function(){return[this.kalmanPoint.x,this.kalmanPoint.y]}},{key:"display",value:function(){this.realInput.display("#0d47a1"),this.kalmanPoint.display("#dd2c00"),this.noisyInput.ttl,this.noisyInput.display("#388e3c")}},{key:"update",value:function(){this.realInput.update(),this.noisyInput.update(),this.kalmanPoint.update(),0==this.realInput.ttl&&(this.dead=!0)}}]),t}(),this.Point=function(){function t(i,s,e){Object(l["a"])(this,t),this.x=i,this.y=s,this.ttl=200,this.ctx=e}return Object(h["a"])(t,[{key:"display",value:function(t){var i=Math.round(255*this.ttl/200).toString(16);this.ctx.beginPath(),this.ctx.arc(this.x,this.y,2,0,2*Math.PI),this.ctx.fillStyle=t+i,this.ctx.fill()}},{key:"update",value:function(){this.ttl--}}]),t}()},frame:function(){var t=performance.now();if("running"==this.status){var i=window.$V,s=this.ctx;this.ctx.fillStyle="#1f1f31",this.ctx.fillRect(0,0,this.width,this.height);var e=4;if(0==this.mode?this.realPoint=new this.Point(this.clientX-3,this.clientY-3,s):1==this.mode?(null==this.realPoint&&(this.realPoint=new this.Point(180,180,s)),0==this.drawPhase?(this.realPoint=new this.Point(this.realPoint.x+e,this.realPoint.y,s),this.realPoint.x==this.width-180&&(this.drawPhase=1)):1==this.drawPhase?(this.realPoint=new this.Point(this.realPoint.x,this.realPoint.y+e,s),this.realPoint.y==this.height-180&&(this.drawPhase=2)):2==this.drawPhase?(this.realPoint=new this.Point(this.realPoint.x-e,this.realPoint.y,s),180==this.realPoint.x&&(this.drawPhase=3)):3==this.drawPhase&&(this.realPoint=new this.Point(this.realPoint.x,this.realPoint.y-e,s),180==this.realPoint.y&&(this.drawPhase=0))):2==this.mode&&(null==this.realPoint?(this.realPoint=new this.Point(0,this.height/2,s),this.drawPhase=0):(this.realPoint=new this.Point(this.realPoint.x+5,this.realPoint.y,s),this.realPoint.x==this.width&&(this.realPoint.x=0,this.states=[],this.lastPoint=i([this.realPoint.x,this.realPoint.y,0,0])))),2!=this.mode)var n=Math.round(this.realPoint.x+Math.randomGaussian(0,this.sigma));else n=this.realPoint.x;var a=Math.round(this.realPoint.y+Math.randomGaussian(0,this.sigma)),r=new this.Point(n,a,s),o=n-this.lastPoint.elements[0],l=a-this.lastPoint.elements[1],h=i([n,a,o,l]),u=this.A.multiply(this.lastPoint),c=this.A.multiply(this.last).multiply(this.A.transpose()).add(this.Q),d=this.H.multiply(c).multiply(this.H.transpose()).add(this.R),m=c.multiply(this.H.transpose()).multiply(d.inverse()),p=h.subtract(this.H.multiply(u));this.lastPoint=u.add(m.multiply(p)),this.last=window.Matrix.I(4).subtract(m.multiply(this.H)).multiply(c);var f=new this.Point(this.lastPoint.elements[0],this.lastPoint.elements[1],s);this.states.push(new this.State(this.realPoint,r,f));for(var v=this.states.length-1;v>0;--v){var P=this.states[v];if(P.display(),P.update(),v>1){var y=P.get(),g=this.states[v-1].get(),w=Math.round(255*y[2]/200).toString(16);s.strokeStyle="#229922"+w,s.lineWidth=1,s.beginPath(),s.moveTo(y[0],y[1]),s.lineTo(g[0],g[1]),s.stroke();y=P.getK(),g=this.states[v-1].getK();s.strokeStyle="#992200"+w,s.lineWidth=1,s.beginPath(),s.moveTo(y[0],y[1]),s.lineTo(g[0],g[1]),s.stroke()}P.dead&&this.states.splice(v,1)}}this.lastCalledTime=performance.now();var b=performance.now()-t;this.ms=b,setTimeout(this.frame,1e3/this.framerate-b)}}},c=u,d=(s("fb7c"),s("2877")),m=Object(d["a"])(c,r,o,!1,null,"02210bee",null),p=m.exports,f={name:"app",components:{Kalman:p}},v=f,P=(s("034f"),Object(d["a"])(v,n,a,!1,null,null,null)),y=P.exports,g=s("30f4");s("d6f6"),s("d1e7");e["a"].use(g["a"]),e["a"].config.productionTip=!1,new e["a"]({render:function(t){return t(y)}}).$mount("#app")},"64a9":function(t,i,s){},dae8:function(t,i,s){},fb7c:function(t,i,s){"use strict";var e=s("dae8"),n=s.n(e);n.a}});
//# sourceMappingURL=app.fad11882.js.map